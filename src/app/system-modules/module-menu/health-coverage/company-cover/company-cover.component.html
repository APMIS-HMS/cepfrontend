<div class="side-wrap-full rhs">
  <div class="btn-1 btn-blue addCoverBtn"><i class="fa fa-plus-square" aria-hidden="true"></i> Add Company Retainership</div>
  <div *ngIf="!coveredDetailView" class="covered-orgs lhs">

    <div class="searchInputWrap">
      <!--<input [formControl]="searchControl" type="search" autofocus class="searchInput" placeholder="search organizations">-->
      <md-input-container class="example-full-width">
            <input mdInput  [formControl]="searchControl" placeholder="Search for an Organization">
      </md-input-container>
       <div id="search"><i class="fa fa-search" aria-hidden="true"></i></div>
    </div>
    <div class="innerBodyTab">
      <div class="tablinkWrap">
        <div (click)="tabA_show()" [ngClass]="{activeTab:tabA}" class="tablink">Companies Covered</div>
        <div (click)="tabB_show()" [ngClass]="{activeTab:tabB}" class="tablink">Manage Categories</div>
      </div>
      <div *ngIf="tabA" class="tab">
        <div *ngFor="let active of activeCompanyHealthCovers" (click)="coveredDetail_show(active)" class="covered-org">
          <img *ngIf="active.corporateFacility?.logoObject == undefined" src="assets/images/logos/default.jpg">
          <img *ngIf="active.corporateFacility?.logoObject != undefined" [src]="facilityService.transform(active.corporateFacility?.logoObject?.thumbnail)">
          <div class="txtWrap">
            <div class="facility">{{active.corporateFacility?.name}}</div>
            <div class="listedFacilityDesc">{{active.personFacilityPrincipals.length}} Employees Covered</div>
          </div>
        </div>
      </div>

      <div *ngIf="tabB" class="tab">
        <div class="tblWrap">
          <div class="tblTop">
             <button (click)="newCat_show()" md-raised-button class="apmis-blue">New Category</button>
          </div>
          <table class="tblBg">
            <thead>
              <tr>
                <th>Category</th>
                <th>Actions</th>
              </tr>

              <tr>
                <td colspan="4">
                  <div class="searchInputWrap">
                    <md-input-container class="example-full-width">
                          <input mdInput placeholder="search for a category">
                    </md-input-container>
                    <div id="search"><i class="fa fa-search" aria-hidden="true"></i></div>
                  </div>
                </td>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let category of categories">
                <td>{{category?.name}}</td>
                <td>
                  <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                  <i class="fa fa-trash" aria-hidden="true"></i>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="accept-request">
      <div *ngIf="newCategory" class="modal-overlay">
        <div class="modal-baseWrap animated pulse">

          <div (click)="close_onClick()" class="modal-close-ico" aria-hidden="true">X</div>
          <legend class="modal_title">Create Category</legend>
          <md-input-container class="example-full-width">
                <input mdInput [formControl]="catInput" placeholder="Enter New Category" autocomplete="off">
          </md-input-container>
           <div style="width:50%; margin:0 auto;">
             <button (click)="createCat()" md-raised-button class="apmis-blue">Create Category</button>
           </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="coveredDetailView" class="coveredDetailView lhs">
    <div class="coveredDetailHeader">
     <img *ngIf="selectedActiveCompanyHealthCover.corporateFacility?.logoObject == undefined" src="assets/images/logos/default.jpg">
      <img *ngIf="selectedActiveCompanyHealthCover.corporateFacility?.logoObject != undefined" [src]="facilityService.transform(selectedActiveCompanyHealthCover.corporateFacility?.logoObject?.thumbnail)">
      <div class="coveredDetailHeader-txt">
        <div class="orgName">{{selectedActiveCompanyHealthCover?.corporateFacility?.name}} | {{selectedActiveCompanyHealthCover?.category?.name}}</div>
        <div class="orgAddress">
          <div> {{selectedActiveCompanyHealthCover.corporateFacility?.address?.street}}, {{selectedCity?.name}}.</div>
          <span>{{selectedState?.name}} </span><strong>.</strong>
          <span>{{selectedCountry?.name}}</span>
        </div>
      </div>
    </div>

    <div class="coveredDetailBody">
      <div class="coveredDetailBodyTitle">Covered Employees</div>

      <div class="searchInputWrap">
        <md-input-container class="example-full-width">
              <input mdInput [formControl]="searchEmployeeControl" autofocus placeholder="search for covered employee">
        </md-input-container>
        <div id="search">
          <i class="fa fa-search" aria-hidden="true"></i>
        </div>
      </div>
    </div>

    <div class="coveredEmployees">
         <div class="example-full-width">
          <button (click)="addEmpShow()" md-raised-button class="apmis-blue"> Add Employee</button>
        </div>

      <div *ngFor="let cover of selectedActiveCompanyHealthCover.personFacilityPrincipals" (click)="dependants_popup(cover)" class="coveredEmployee color1">
        <div class="nameImgWrap">
          <img *ngIf="cover.personDetails?.profileImageObject == undefined" src="assets/images/users/default.png">
          <img *ngIf="cover.personDetails?.profileImageObject != undefined" [src]="facilityService.transform(cover.personDetails?.profileImageObject?.thumbnail)">
          <div class="coveredEmployeeName">{{cover.personDetails?.lastName}} {{cover.personDetails?.firstName}}</div>
        </div>
        <div class="coveredEmployeeDependantCount">{{cover.personDetails?.phoneNumber}}</div>
        <div class="coveredEmployeeDependantCount">{{cover.dependants?.length}} Dependants</div>
      </div>
    </div>
  </div>

  <div class="search-orgs rhs">
    <div class="secTitle">Pending Request(s)</div>
     <md-input-container class="example-full-width">
            <input mdInput  [formControl]="searchPendingControl" autofocus placeholder="search pending requests">
      </md-input-container>


    <div (click)="acceptRequest_show(pending)" *ngFor="let pending of pendingCompanyHealthCovers" class="orgWrap">
      <img *ngIf="pending.corporateFacility?.logoObject == undefined" src="assets/images/logos/default.jpg">
      <img *ngIf="pending.corporateFacility?.logoObject != undefined" [src]="facilityService.transform(pending.corporateFacility?.logoObject?.thumbnail)">
      <div class="txtWrap">
        <div class="facility">{{pending.corporateFacility?.name}}</div>
        <div class="listedFacilityDesc">
          {{pending.corporateFacility.description | shorten: 100: '...':wordBreak:true}}
        </div>
      </div>
    </div>

    <div class="accept-request">
      <div *ngIf="acceptRequest" class="modal-overlay">
        <div class="modal-baseWrap animated pulse">

          <div (click)="close_onClick()" class="modal-close-ico" aria-hidden="true">X</div>
          <legend class="modal_title">Accept Request</legend>

          <div class="orgWrap">
            <img *ngIf="selectedPendingCompanyHealthCover.corporateFacility?.logoObject == undefined" src="assets/images/logos/default.jpg">
            <img *ngIf="selectedPendingCompanyHealthCover.corporateFacility?.logoObject != undefined" [src]="facilityService.transform(selectedPendingCompanyHealthCover.corporateFacility?.logoObject?.thumbnail)">
            <div class="txtWrap">
              <div class="facility">{{selectedPendingCompanyHealthCover?.corporateFacility?.name}}</div>
            </div>
          </div>

          <!--<select [formControl]="selectCategory">
              <option  value="" disabled selected>Select Category</option>
              <option [value]="category._id" *ngFor="let category of categories">{{category?.name}}</option>
          </select>-->
          <md-select [formControl]="selectCategory" placeholder="Categories">
            <option  value="" disabled selected>Select Category</option>
            <md-option *ngFor="let category of categories" [value]="category._id">{{category?.name}}</md-option>
          </md-select>
           <div class="example-full-width" id="example-full-width">
              <button (click)="acceptReq()" class="apmis-blue" md-raised-button>Accept Request</button>
          </div>

        </div>
      </div>
    </div>

  </div>
  <div class="clear"></div>

  <div *ngIf="personDependants" class="modal-overlay">
    <app-person-dependants [dependantType]="type" [selectedActiveCompanyHealthCover]="selectedActiveCompanyHealthCover" [selectedPersonPrincipal]="selectedPersonPrincipal"
      (closeModal)="close_onClick($event)" id="form-modal" class="form-modal center-center"></app-person-dependants>
  </div>
  <div *ngIf="addEmployee" class="modal-overlay">
    <app-add-employee [selectedCompanyHealthCover]="selectedActiveCompanyHealthCover" (closeModal)="close_onClick($event)" id="form-modal"
      class="form-modal center-center"></app-add-employee>
  </div>
</div>