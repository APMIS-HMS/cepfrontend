<div class="pp-card shadow-grey">
    <div class="card-title">Department(s)</div>

    <ul class="dept-wrap">
        <li class="dept-li">
            <div *ngFor="let dept of getActiveDepartments()">
                <div class="dept-item">
                    <div class="dept-name">{{dept.name}}</div>
                    <div class="action-icons">
                        <i [hidden]="showUnit_selectedDepartmentUnit(dept)" (click)="showUnit_click(dept)" class="fa fa-expand" aria-hidden="true"></i>
                        <i *ngIf="showUnit_selectedDepartmentUnit(dept)" (click)="showUnit_hide(dept)" class="fa fa-compress" aria-hidden="true"></i>
                        <i (click)="newUnit_onClick(dept)" class="fa fa-plus" aria-hidden="true"></i>
                        <i (click)="editDept_onClick(dept)" class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        <i (click)="removeDeptDepartmentFacade(dept)" class="fa fa-trash-o" aria-hidden="true"></i>
                    </div>
                </div>

                <div *ngIf="showUnit_selectedDepartmentUnit(dept)" class="dept-units">
                    <div class="tbl-resp-wrap">
                        <table cellpadding="0" cellspacing="0" border="0.5">
                            <thead>
                                <tr *ngIf="dept.units.length > 0">
                                    <th>
                                        <span style="padding-left: 3px;">Unit</span>
                                    </th>
                                    <th>
                                        <span style="padding-left: 3px;">Short Name</span>
                                    </th>
                                    <th>Actions</th>
                                </tr>
                            </thead>

                            <tbody *ngIf="dept.units.length > 0">
                                <tr *ngFor="let unit of getActiveUnits(dept.units)">
                                    <td> {{unit.name}}</td>
                                    <td>{{unit.shortName}}</td>
                                    <td class="action-icons">
                                        <i (click)="editUnit_onClick(dept, unit)" class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                        <i (click)="removeUnitFacade(dept, unit)" class="fa fa-trash" aria-hidden="true"></i>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody *ngIf="dept.units.length == 0">
                                <tr>
                                    <td class="table-content" colspan="6" style="text-align: center "> No data available in table</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </li>
    </ul>

    <span (click)="newDept_onClick()" id="floating-button">
        <p class="plus">+</p>
    </span>
</div>

<div *ngIf="newDept" class="modal-overlay">
    <app-new-department [selectedDepartment]="selectedDepartment" (closeModal)="close_onClick($event)" (onRefresh)="getFacility($event)" id="form-modal" class="form-modal center-center"></app-new-department>
</div>
<div *ngIf="newUnit" class="modal-overlay">
    <app-new-unit [department]="selectedDepartment" (closeModal)="close_onClick($event)" [unit]="selectedUnit" id="form-modal" class="form-modal center-center"></app-new-unit>
</div>