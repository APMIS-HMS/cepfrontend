<div class="inner-wrap-b body-wrap">
    <div class="facility-title">Payment</div>
    <div class="inner-page-wrap">
        <div class="megaPgWrap pay-pg">
            <div class="feedsWrap leftCol">
                <div class="feedbox">
                    <div class="pending-wrap">
                        <div class="pending-header">
                            <div class="pending-title">Patient's Pending Bills</div>
                            <div class="search-wrap">
                                <mat-input-container>
                                    <input matInput placeholder="search for bill" [formControl]="searchPendingBill">
                                </mat-input-container>
                            </div>
                        </div>
                        <ul class="pending-bills">
                            <li class="empWrap" *ngFor="let pendingBill of pendingBills; let i = index;" routerLink="/dashboard/payment/bill/{{pendingBill?.principalObject?._id }}">
                                <div class="list-img">
                                    <img *ngIf="pendingBill?.principalObject?.personDetails?.profileImageObject == undefined" src="assets/images/users/default.png">
                                    <img class="shadow" *ngIf="pendingBill?.principalObject?.personDetails?.profileImageObject != undefined" [src]="facilityService.transform(pendingBill?.principalObject?.personDetails?.profileImageObject.thumbnail)">
                                </div>
                                <div class="list-labels">
                                    <div class="pending-name">{{pendingBill?.principalObject?.personDetails?.firstName}} {{pendingBill?.principalObject?.personDetails?.lastName}}</div>
                                    <div class="oda">
                                        <div class="pending-date">{{ pendingBill?.updatedAt |date:'medium'}}</div>
                                        <div class="pending-amount" *ngIf="pendingBill.grandTotalExcludeInvoice!=0">
                                            <span>&#x20a6;</span>{{ pendingBill?.grandTotalExcludeInvoice|numberThr }}</div>
                                    </div>
                                </div>
                            </li>
                            <li *ngIf="loadingPendingBills">
                                <div class="text-center">
                                    <i class="fa fa-circle-o-notch fa-spin fa-3x text-blue" aria-hidden="true"></i>
                                </div>
                            </li>

                            <li *ngIf="pendingBills.length === 0 && !loadingPendingBills" class="empWrap">
                                <div>No data available in table</div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="feedbox">
                    <div class="pending-wrap">
                        <div class="pending-header">
                            <div class="pending-title">Invoices</div>
                            <div class="search-wrap">
                                <mat-input-container>
                                    <input matInput placeholder="search for invoice" [formControl]="searchPendingInvoices">
                                </mat-input-container>
                            </div>
                        </div>
                        <div>
                            <li *ngIf="isLoadingInvoice" class="empWrap">
                                <div class="text-center">
                                    <i class="fa fa-circle-o-notch fa-spin fa-3x text-blue" aria-hidden="true"></i>
                                </div>
                            </li>
                            <li *ngIf="invoiceGroups.length === 0 && !isLoadingInvoice" class="empWrap">
                                <div>No data available in table</div>
                            </li>
                        </div>
                        <div>
                            <ul class="pending-bills" *ngFor="let invoice of invoiceGroups">
                                <li class="empWrap" (click)="onSelectedInvoice(invoice)">
                                    <div class="list-img">
                                        <img *ngIf="invoice?.personDetails.profileImageObject != undefined" [src]="facilityService.transform(invoice?.personDetails.profileImageObject.thumbnail)">
                                        <img *ngIf="invoice?.personDetails.profileImageObject == undefined" src="assets/images/users/default.png">
                                    </div>
                                    <div class="list-labels">
                                        <div class="pending-name">{{invoice?.personDetails.firstName}} {{invoice?.personDetails?.lastName}}</div>
                                        <div class="oda">
                                            <div class="pending-date">{{invoice.updatedAt|date:'medium'}}</div>
                                            <div class="pending-amount">
                                                <span>&#x20a6;</span>{{invoice.balance|numberThr}}</div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="contentCol">
                <div class="stat-summary">
                    <div class="stat-item shadow-grey">
                        <div class="stat-label">Amount Recieved</div>
                        <div class="stat-val">
                            <span>&#x20a6;</span>{{totalAmountReceived|numberThr}}</div>
                    </div>

                    <div class="stat-item shadow-grey">
                        <div class="stat-label">Amount Paid</div>
                        <div class="stat-val">
                            <span>&#x20a6;</span>
                        </div>
                    </div>

                    <div class="stat-item shadow-grey">
                        <div class="stat-label">Pending Bills</div>
                        <div class="stat-val">
                            <span>&#x20a6;</span>{{totalAmountBilled|numberThr}}</div>
                    </div>
                </div>

                <div class="stat-wrap">
                    <div style="display: block">
                        <canvas baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions" [legend]="barChartLegend" [chartType]="barChartType" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>