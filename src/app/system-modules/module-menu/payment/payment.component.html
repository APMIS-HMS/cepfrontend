<div class="inner-wrap-b body-wrap">
    <div class="facility-title">Payment</div>
    <div class="inner-page-wrap">
        <div class="megaPgWrap pay-pg">
            <div class="feedsWrap leftCol">
                <div class="feedbox">
                    <div class="pending-wrap">
                        <div class="pending-header">
                            <div class="pending-title">Patient's Pending Bills</div>
                            <div class="search-wrap">
                                <md-input-container>
                                    <input mdInput placeholder="search for bill" [formControl]="searchPendingBill">
                                </md-input-container>
                            </div>
                        </div>
                        <ul class="pending-bills">
                            <li class="empWrap" *ngFor="let pendingBill of pendingBills; let i = index;" routerLink="/dashboard/payment/bill/{{pendingBill.patientItem.personId }}">
                                <div class="list-img">
                                    <img *ngIf="pendingBill?.patientItem?.personDetails?.profileImageObject == undefined" src="assets/images/users/default.png">
                                    <img class="shadow" *ngIf="pendingBill?.patientItem?.personDetails?.profileImageObject != undefined" [src]="facilityService.transform(pendingBill?.patientItem?.personDetails?.profileImageObject?.thumbnail)">
                                </div>
                                <div class="list-labels">
                                    <div class="pending-name">{{pendingBill?.patientItem?.personDetails?.firstName}} {{ pendingBill?.patientItem?.personDetails?.lastName}}</div>
                                    <div class="oda">
                                        <div class="pending-date">{{ pendingBill?.createAt | date }}</div>
                                        <div class="pending-amount" *ngIf="pendingBill.grandTotalExcludeInvoice!=0">
                                            <span>&#x20a6;</span>{{ pendingBill?.grandTotalExcludeInvoice|numberThr }}</div>
                                    </div>
                                </div>
                            </li>
                            <li *ngIf="pendingBills.length === 0 && loadingPendingBills" class="empWrap">
                                <div class="text-center">
                                    <md-spinner class='small-spinner'></md-spinner>
                                </div>
                            </li>

                            <li *ngIf="pendingBills.length === 0 && !loadingPendingBills" class="empWrap">
                                <div>No data available in table</div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="feedbox">
                    <div class="pending-wrap">
                        <div class="pending-header">
                            <div class="pending-title">Invoices</div>
                            <div class="search-wrap">
                                <md-input-container>
                                    <input mdInput placeholder="search for invoice" [formControl]="searchPendingInvoices">
                                </md-input-container>
                            </div>
                        </div>
                        <div>
                            <li *ngIf="invoiceGroups.length === 0 && isLoadingInvoice" class="empWrap">
                                <div class="text-center">
                                    <md-spinner class='small-spinner'></md-spinner>
                                </div>
                            </li>
                        </div>
                        <div>
                            <ul class="pending-bills" *ngFor="let invoice of invoiceGroups">
                                <li class="empWrap">
                                    <div class="list-img">
                                        <img *ngIf="invoice?.personDetails.personDetails.profileImageObject != undefined" [src]="facilityService.transform(invoice?.personDetails.personDetails.profileImageObject.thumbnail)">
                                        <img *ngIf="invoice?.personDetails.personDetails.profileImageObject == undefined" src="assets/images/logos/default.png">
                                    </div>
                                    <div class="list-labels">
                                        <div class="pending-name">{{invoice?.personDetails.personDetails.firstName}} {{invoice?.personDetails?.personDetails?.lastName}}</div>
                                        <div class="oda">
                                            <div class="pending-date">{{invoice.createdAt|date:'medium'}}</div>
                                            <div class="pending-amount">
                                                <span>&#x20a6;</span>{{invoice.totalPrice|numberThr}}</div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="contentCol">
                <div class="stat-summary">
                    <div class="stat-item shadow-grey">
                        <div class="stat-label">Amount Recieved</div>
                        <div class="stat-val">
                            <span>&#x20a6;</span>{{totalAmountReceived|numberThr}}</div>
                    </div>

                    <div class="stat-item shadow-grey">
                        <div class="stat-label">Amount Paid</div>
                        <div class="stat-val">
                            <span>&#x20a6;</span>
                        </div>
                    </div>

                    <div class="stat-item shadow-grey">
                        <div class="stat-label">Pending Bills</div>
                        <div class="stat-val">
                            <span>&#x20a6;</span>{{totalAmountBilled|numberThr}}</div>
                    </div>
                </div>

                <div class="stat-wrap">
                    <div>
                        <li *ngIf="loadingLocAmountAccrued" class="empWrap">
                            <div class="text-center">
                                <md-spinner class='small-spinner'></md-spinner>
                            </div>
                        </li>
                    </div>
                    <div style="display: block" *ngIf="!loadingLocAmountAccrued">
                        <canvas baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions" [legend]="barChartLegend"
                            [chartType]="barChartType" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)"></canvas>
                    </div>

                    <div class="stat-tbl pending-title" *ngIf="!loadingLocAmountAccrued">
                        <table class="tblBg">
                            <thead>
                                <tr>
                                    <th *ngFor="let item of barChartLabels">{{item}</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr *ngFor="let item of barChartData">
                                    <td>
                                        <span class="service"> {{item.label}}</span>
                                    </td>
                                    <td *ngFor="let item2 of item.data">
                                        <span>&#x20a6;</span>{{item2}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>