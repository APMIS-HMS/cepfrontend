<div class="pg-subtitle">
    RADIOLOGY REQUESTS
</div>
<div>
    <div class="doc-mainWrap">
        <div class="doc-contentArea">
            <div class="clinicalNoteWrap">
                <div class="actSect">
                    <div (click)="request_show()" class="act-wrap">
                        <i *ngIf="request_view" class="fa fa-minus" aria-hidden="true"></i>
                        <i [hidden]="request_view" class="fa fa-plus" aria-hidden="true"></i>
                        <span>New Request</span>
                    </div>
                    <div *ngIf="isExternal===true" (click)="extList_show()" class="ext-listBtn">External Requests</div>

                    <div *ngIf="extList" class="ext-list shadow-RB">
                        <div (click)="extList_close()" class="x">x</div>
                        <table cellpadding="0" cellspacing="0" border="0.5">
                            <tbody>

                                <tr>
                                    <td>11th Oct 2018</td>
                                    <td>Clinics Diagnosis</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <form class="frmNoteWrap" *ngIf="request_view" [formGroup]="frmNewRequest" novalidate>
                        <div *ngIf="isLaboratory" class="labBtn-wrap">
                            <div (click)="newPerson()" class="lab-btn"><i class="fa fa-plus" aria-hidden="true"></i>Register Patient</div>
                        </div>
                        <div class="clear-r"></div>
                        <div class="frm-wrap">
                            <div class="frm-l">
                                <div *ngIf="isLaboratory" class="frm-item-wrap">
                                    <apmis-lookup formControlName="patient" [(ngModel)]="apmisLookupText" [url]="apmisLookupUrl" [query]="apmisLookupQuery" placeholder="search for patient" [isSocket]="false" [displayKey]="apmisLookupDisplayKey" [displayImage]="true" [imgObj]="apmisLookupImgKey"
                                        [multipleKeys]="true" [otherKeys]="apmisLookupOtherKeys" (selectedItem)="apmisLookupHandleSelectedItem($event)"></apmis-lookup>
                                </div>

                                <div class="frm-item-wrap">
                                    <mat-input-container>
                                        <textarea style="height: 120px;" matInput formControlName="clinicalInfo" placeholder="Clinical Information"></textarea>
                                    </mat-input-container>
                                </div>

                            </div>
                            <div class="frm-r">
                                <div class="frm-item-wrap">
                                    <mat-input-container>
                                        <input matInput placeholder="Lab Number" formControlName="labNo">
                                    </mat-input-container>
                                </div>

                                <div class="frm-item-wrap">
                                    <mat-input-container>
                                        <textarea style="height: 120px;" matInput placeholder="Diagnosis"></textarea>
                                    </mat-input-container>
                                </div>

                            </div>
                        </div>

                        <div class="investigation-sect">

                            <div class="investigation-list">
                                <div class="frm-item-wrap">
                                    <mat-input-container>
                                        <input matInput  placeholder="search for Investigation" autocomplete="off">
                                    </mat-input-container>
                                </div>

                                <div *ngFor="let investigation of investigations">
                                    <div *ngIf="investigation.investigation.isPanel">
                                        <div class="panel-wrap">
                                            <div class="list-item panel">
                                                <div class="txt-innerWrap">
                                                    <mat-checkbox></mat-checkbox>
                                                    <div class="txt-label list-label">X-Ray of the right arm</div>
                                                </div>
                                                <i class="fa fa-long-arrow-down" aria-hidden="true"></i>
                                            </div>

                                            <div class="panel-loc">
                                                <div class="inner-radio">

                                                    <mat-checkbox>External</mat-checkbox>
                                                    <mat-radio-group>
                                                        <mat-radio-button class="opt" [checked]="false">
                                                            <div class="opt-inner">
                                                                <div>Xray Department</div>
                                                                <div class="opt-price"><span>&#x20a6;</span>2000</div>
                                                            </div>
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                            <div class="child-list">
                                                <div class="txt-innerWrap">
                                                    <div class="chkbox-wrap">
                                                        <mat-checkbox></mat-checkbox>
                                                        <div class="child-item">Xray of the right arm</div>
                                                    </div>

                                                    <div class="inner-radio">
                                                        <div class="opt-inner">
                                                            <div>Name of panel</div>
                                                            <div class="opt-price"><span>&#x20a6;</span>700</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="list-item investigation">
                                        <div class="txt-innerWrap">
                                            <div class="chkbox-wrap">
                                                <mat-checkbox></mat-checkbox>
                                                <div class="list-label">Xray of the right arm</div>
                                            </div>

                                            <div class="inner-radio">
                                                <mat-checkbox>External</mat-checkbox>
                                                <mat-radio-group>
                                                    <mat-radio-button class="opt">
                                                        <div class="opt-inner">
                                                            <div>Sama Diagnostics</div>
                                                            <div class="opt-price"><span>&#x20a6;</span>300</div>
                                                        </div>
                                                    </mat-radio-button>
                                                </mat-radio-group>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="selected-list">
                                <div class="sel-list-title">SELECTED INVESTIGATIONS</div>
                                <div class="sel-total"><span>&#x20a6;</span>5000</div>
                                <div>
                                    <div class="panel-wrap">
                                        <div class="panel-inner">
                                            <div class="list-item panel">
                                                <div class="txt-innerWrap item-bi-sect">
                                                    <div class="txt-label list-label">Xray of the arm</div>
                                                    <div class="txt-label list-label">Clinics Diagnostics</div>
                                                </div>
                                                <div class="txt-wrap actions-wrapa item-bi-sect">
                                                    <div class="txt-innerWrap">
                                                        <div class="txt-label">External</div>
                                                        <div class="txt-val">
                                                            <mat-checkbox></mat-checkbox>
                                                        </div>
                                                    </div>

                                                    <div class="txt-innerWrap">
                                                        <div class="txt-label">Urgent</div>
                                                        <div class="txt-val">
                                                            <mat-checkbox></mat-checkbox>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="close">X</div>
                                            </div>

                                        </div>
                                        <div class="panel-inner child-list">
                                            <div class="list-item">
                                                <div class="txt-innerWrap  item-bi-sect">
                                                    <div class="txt-label child-item">this is a panel</div>
                                                </div>

                                                <div class="txt-wrap actions-wrapa item-bi-sect">
                                                    <!-- <div class="txt-innerWrap">
                                                        <div class="txt-label">External</div>
                                                        <div class="txt-val">
                                                            <mat-checkbox (change)="externalChanged($event, panel)" [checked]="investigation.isExternal"></mat-checkbox>
                                                        </div>
                                                    </div> -->

                                                    <div class="txt-innerWrap">
                                                        <div class="txt-label">Urgent</div>
                                                        <div class="txt-val">
                                                            <mat-checkbox></mat-checkbox>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="list-item investigation">
                                        <div class="item-bi-sect">
                                            <div class="list-label">Xray of the right arm</div>
                                            <div class="txt-label list-label">Sama Diagnostics</div>
                                            <div class="opt-price"><span>&#x20a6;</span>3000</div>
                                        </div>

                                        <div class="txt-wrap actions-wrapa item-bi-sect">
                                            <div class="txt-innerWrap">
                                                <div class="txt-label">External</div>
                                                <div class="txt-val">
                                                    <mat-checkbox></mat-checkbox>
                                                </div>
                                            </div>

                                            <div class="txt-innerWrap">
                                                <div class="txt-label">Urgent</div>
                                                <div class="txt-val">
                                                    <mat-checkbox></mat-checkbox>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="close">X</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="btn-box">
                            <button mat-raised-button (click)="save(frmNewRequest.valid, frmNewRequest.value)" class="btn">Make Request</button>
                        </div>
                    </form>
                </div>

                <div class="tblWrapa" class="actSect">
                    <table cellpadding="0" cellspacing="0" border="0.5">
                        <thead>
                            <tr>
                                <th>
                                    <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                                    <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                                    <span style="padding-left: 3px;">Date</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                                    <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                                    <span style="padding-left: 3px;">Patient</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                                    <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                                    <span style="padding-left: 3px;">Description</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                                    <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                                    <span style="padding-left: 3px;">Source</span>
                                </th>
                                <th>Status</th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>

                            <tr>
                                <td colspan="10">
                                    <div class="tbl-actionRow">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Lite Hospital | 11th Oct 2018</td>
                                <td>
                                    <div class="empWrap">
                                        <div class="list-img">
                                            <div ><img src="assets/images/users/default.png"></div>
                                        </div>
                                        <div>Solomon Kings</div>
                                    </div>
                                </td>
                                <td>Xray of the right arm</td>
                                <td></td>
                                <td>
                                    <div class="status-wrap">
                                        <div class="status-item">
                                            <div class="status-label">Payment Made</div>
                                            <!-- <div [class.isSample]="paymentStatus" [class.notSample]="!paymentStatus" class="status-val"></div> -->
                                            <i class="fa fa-check isSample" aria-hidden="true"></i>
                                            <!-- <i *ngIf="!paymentStatus" class="fa fa-minus notSample" aria-hidden="true"></i> -->
                                        </div>
                                        <div class="status-item">
                                            <div class="status-label">Sample Taken</div>
                                            <!-- <div [class.isSample]="sampleStatus" [class.notSample]="!sampleStatus" class="status-val"></div> -->
                                            <i class="fa fa-check isSample" aria-hidden="true"></i>
                                            <!-- <i *ngIf="!request?.sampleTaken===true" class="fa fa-minus notSample" aria-hidden="true"></i> -->
                                        </div>
                                        <div class="status-item">
                                            <div class="status-label">Specimen Recieved</div>
                                            <!-- <div [class.isSample]="recievedStatus" [class.notSample]="!recievedStatus" class="status-val"></div> -->
                                            <!-- <i *ngIf="request?.specimenReceived" class="fa fa-check isSample" aria-hidden="true"></i> -->
                                            <i class="fa fa-minus notSample" aria-hidden="true"></i>
                                        </div>
                                        <div class="status-item">
                                            <div class="status-label">Result Available</div>
                                            <!-- <div [class.isSample]="resultStatus" [class.notSample]="!resultStatus" class="status-val"></div> -->
                                            <i class="fa fa-check isSample" aria-hidden="true"></i>
                                            <!-- <i *ngIf="!request?.isUploaded" class="fa fa-minus notSample" aria-hidden="true"></i> -->
                                        </div>
                                    </div>
                                </td>
                                <td *ngIf="isLaboratory" class="action-placeholder" style="text-align:center;">
                                    <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                                    <div class="action-container shadow-RB">
                                        <div (click)="reqDetail(request)" class="action-item">
                                            <i class="fa fa-file-text-o" aria-hidden="true"></i>
                                            <span>View Investigation</span>
                                        </div>

                                        <div *ngIf="request.isPaid && request.sampleTaken" class="action-item" (click)="goToWriteReport(request);">
                                            <i class="fa fa-file-text" aria-hidden="true"></i>
                                            <span>Write Report</span>
                                        </div>

                                        <div (click)="showImageBrowseDlg()" class="action-item">
                                            <i class="fa fa-cloud-upload" aria-hidden="true"></i>
                                            <span>Upload File</span>
                                        </div>
                                        <input style="display:none;" #fileInput type="file" id="uploadResult" (click)="onChange($event)">
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="reqDetail_view" class="modal-overlay">
    <app-rad-request-detail (closeModal)="close_onClick($event)" id="form-modal" class="form-modal center-center"></app-rad-request-detail>
</div>
<div *ngIf="personAcc_view" class="modal-overlay">
    <app-person-account (closeModal)="close_onClick($event)" id="form-modal" class="form-modal center-center"></app-person-account>
</div>