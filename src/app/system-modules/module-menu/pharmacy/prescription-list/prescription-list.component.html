<!-- <div class="backBtn" routerLink="/dashboard/store/home">
    Go To Store
</div> -->

<section id="presc-list">
    <mat-tab-group>
        <mat-tab label="Prescription">
            <div class="survery">
                <div class="col-xs-12 " style="padding: 0; ">
                    <table cellpadding="0 " cellspacing="0 " border="0.5 ">
                        <thead>
                            <tr class="table-header ">
                                <th>
                                    <span>No</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc " aria-hidden="true "></i>
                                    <span>Date</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc " aria-hidden="true "></i>
                                    <span>Patient</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc " aria-hidden="true "></i>
                                    <span>Location</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc " aria-hidden="true "></i>
                                    <span>Priority</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc " aria-hidden="true "></i>
                                    <span>Prescriber</span>
                                </th>
                                <th>
                                    <i class="fa fa-sort-alpha-asc " aria-hidden="true "></i>
                                    <span>Status</span>
                                </th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td class="table-content " colspan="7">
                                    <form [formGroup]="prescriptionFormGroup">
                                        <div class="col-sm-4">
                                            <input type="search" formControlName="search" class="form-control" placeholder="Search Employee">
                                        </div>
                                        <div class="col-sm-4">
                                            <select formControlName="category" class="form-control" (change)="onChangeCategory($event);">
                                                <option value="" selected>Select Category</option>
                                                <option value="individual">Individual</option>
                                                <option value="corporate">Corporate</option>
                                                <option value="internal">Internal</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4">
                                            <mat-form-field>
                                                <input matInput formControlName="date" [matDatepicker]="pickerr" placeholder="Choose a date">
                                                <mat-icon matSuffix>
                                                    <mat-datepicker-toggle mdSuffix [for]="pickerr"></mat-datepicker-toggle>
                                                </mat-icon>
                                            </mat-form-field>
                                            <mat-datepicker #pickerr></mat-datepicker>
                                            <!-- <mat-input-container>
                                                <input matInput formControlName="date" [matDatepicker]="pickerr" placeholder="Choose a date">
                                                <mat-datepicker-toggle mdSuffix [for]="pickerr"></mat-datepicker-toggle>
                                            </mat-input-container>
                                            <mat-datepicker #pickerr></mat-datepicker> -->
                                            <!-- <mat-input-container>
                                                <input formControlName="date" matInput [matDatepicker]="picker1" placeholder="Choose a date">
                                                <button mdSuffix [matDatepickerToggle]="picker1"></button>
                                            </mat-input-container>
                                            <mat-datepicker #picker1></mat-datepicker> -->
                                        </div>
                                    </form>
                                </td>
                            </tr>
                            <tr *ngIf="prescriptionLists.length===0 && !loading ">
                                <td class="table-content " colspan="7" style="text-align: center "> No data available in table</td>
                            </tr>
                            <tr *ngIf="prescriptionLists.length===0 && loading ">
                                <td class="table-content " colspan="7" style="text-align: center ">
                                    <i class="fa fa-circle-o-notch fa-spin fa-3x text-blue" aria-hidden="true"></i>
                                </td>
                            </tr>
                            <tr *ngFor="let prescription of prescriptionLists; let i = index;" routerLink='/dashboard/pharmacy/prescriptions/{{prescription._id}}'>
                                <td class="table-content">{{ i+1 }}</td>
                                <td class="table-content">{{prescription?.updatedAt | date}}</td>
                                <td class="table-content">{{prescription?.personDetails.firstName }} {{prescription?.personDetails.lastName }}</td>
                                <td class="table-content">{{prescription?.clinicDetails?.clinicName}}</td>
                                <td class="table-content">{{prescription?.priority?.name}}</td>
                                <td class="table-content">{{prescription?.employeeDetails.firstName }} {{prescription?.employeeDetails.lastName }}</td>
                                <td class="table-content">
                                    <span *ngIf="prescription.status == 'completely'" style="color:forestgreen">Completely<br>Assessed</span>
                                    <span *ngIf="prescription.status == 'partly'" style="color:blue">Partly<br>Assessed</span>
                                    <span *ngIf="prescription.status == 'not'" style="color:crimson">Not<br>Assessed</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Walk in">
            <div class="card">
                <div class="card-header">
                    <div class="row" *ngIf="!wsearchOpen">
                        <div class="table-head col-md-2">
                            Date
                        </div>
                        <div class="table-head col-md-2">
                            Client
                        </div>
                        <div class="table-head col-md-2">
                            Prescriber
                        </div>
                        <div class="table-head col-md-2">
                            Qty
                        </div>
                        <div class="table-head col-md-2">
                            Total
                        </div>
                        <div class="table-head col-md-1">
                            Status
                        </div>
                        <div class="table-head col-md-1">
                            <i class="fa fa-search fa-fw" (click)="openSearch()"></i>
                        </div>
                    </div>
                    <div class="row" *ngIf="wsearchOpen">
                        <div class="col-md-4">
                            <input class="table-header-input" type="text" placeholder="Search Employee">
                        </div>
                        <div class="col-md-4">
                            <select class="table-header-select" formControlName="category" placeholder="Select Category" (change)="onChangeCategory($event);">
                                        <option value="" selected>Select Category</option>
                                        <option value="individual">Individual</option>
                                        <option value="corporate">Corporate</option>
                                        <option value="internal">Internal</option>
                                    </select>
                        </div>
                        <div class="col-md-3">
                            <input class="table-header-input" type="date" placeholder="Choose a date">
                        </div>
                        <div class="col-md-1 table-head">
                            <i class="fa fa-close fa-fw" (click)="closeSearch()"></i>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-list-item">
                        <div *ngIf="prescriptionLists.length===0 && !loading" class="row">
                            <div class="table-list col-lg-12">
                                No data available in table
                            </div>
                        </div>
                        <div *ngIf="prescriptionLists.length===0 && loading" class="row">
                            <div class="table-list col-lg-12">
                                <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-list-item" *ngFor="let prescription of prescriptionLists; let i = index;" routerLink='/dashboard/pharmacy/prescriptions/{{prescription._id}}'>
                        <div class="row">
                            <div class="table-list col-lg-2">{{prescription?.updatedAt | date}}</div>
                            <div class="table-list col-lg-2">{{prescription?.nonPrescription?.client?.clientType}}</div>
                            <div class="table-list col-lg-2">{{prescription?.nonPrescription?.employee?.name}}</div>
                            <div class="table-list col-lg-2">{{prescription?.nonPrescription?.totalQuantity}}</div>
                            <div class="table-list col-lg-2">{{prescription?.nonPrescription?.totalCost}}</div>
                            <div class="table-list col-lg-2">
                                <span style="color:forestgreen">Completely Dispensed</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </mat-tab>
    </mat-tab-group>
</section>