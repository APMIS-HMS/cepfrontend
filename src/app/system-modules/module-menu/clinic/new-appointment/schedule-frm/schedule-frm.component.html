<div class="schedule-wrap">
    <div class="row">
        <div class="col-md-4">
                    <div>
                        <apmis-lookup [formControl]="patient" [(ngModel)]="apmisLookupText" [url]="apmisLookupUrl" [query]="apmisLookupQuery" placeholder="Search for Patient" [isSocket]="true" [displayKey]="apmisLookupDisplayKey" [displayImage]="true" [imgObj]="apmisLookupImgKey"
                            [multipleKeys]="true" [otherKeys]="apmisLookupOtherKeys" (selectedItem)="apmisLookupHandleSelectedItem($event)"></apmis-lookup>
                    </div>
        
                    <div>
                            <mat-input-container width="100%">
                                <input [formControl]="dateCtrl" [hourTime]="'12'" matInput [value]="date | date: 'dd/MM/yyyy HH:mm a'" dateTimePicker />
                                <mat-error *ngIf="dateCtrl.hasError('noValue')">
                                    <span *ngIf="!isEarlierDate">{{clinicErrorMsg}}</span>
                                    <span *ngIf="isEarlierDate">{{clinicErrorEalierDateMsg}}</span>
                                </mat-error>
                            </mat-input-container>
                    </div>
        
                    <div>
                        <mat-input-container>
                            <input matInput placeholder="AppointmentType" [matAutocomplete]="autoType" [formControl]="type">
                        </mat-input-container>
        
                        <mat-autocomplete #autoType="matAutocomplete" [displayWith]="appointmentTypeDisplayFn">
                            <mat-option *ngFor="let type of appointmentTypes" [value]="type">
                                {{ type.name }}
                            </mat-option>
                        </mat-autocomplete>
                    </div>
        
                    <div>
                        <mat-input-container>
                            <input matInput placeholder="Status" [matAutocomplete]="autoStatus" [formControl]="status">
                        </mat-input-container>
        
                        <mat-autocomplete #autoStatus="matAutocomplete" [displayWith]="orderStatusDisplayFn">
                            <mat-option *ngFor="let order of orderStatuses" [value]="order">
                                {{ order.name }}
                            </mat-option>
                        </mat-autocomplete>
                    </div>
        </div>
        <div class="col-md-4">
                <div>
                        <mat-input-container>
                            <input matInput placeholder="Clinic" [matAutocomplete]="ClinicAuto" [formControl]="clinic">
                        </mat-input-container>
        
                        <mat-autocomplete #ClinicAuto="matAutocomplete" [displayWith]="displayFn">
                            <mat-option *ngFor="let clinic of clinics" [value]="clinic">
                                {{ clinic.clinicName }}
                            </mat-option>
                        </mat-autocomplete>
                    </div>
        
                    <div class="tr-act-btn">
                        <i class="fa fa-calendar" aria-hidden="true"></i>
                        <span>Next Available Date</span>
                    </div>
                    <br>
                    <div>
                        <mat-checkbox [formControl]="checkIn">Check In</mat-checkbox>
                    </div>
                    <br>
        
                    <div *ngIf="!showImmunization">
                        <mat-checkbox [formControl]="teleMed">Tele Medicine Consultation</mat-checkbox>
                    </div>
                    <br>
                    <div>
                        <mat-checkbox [formControl]="immun">Immnunization</mat-checkbox>
                    </div>
                    <br>
                    
        </div>
        <div class="col-md-4">
                <div class="filter-xxx">
                        <apmis-lookup [formControl]="provider" [(ngModel)]="apmisProviderLookupText" [url]="apmisProviderLookupUrl" [query]="apmisProviderLookupQuery" placeholder="Search for Provider" [isSocket]="true" [displayKey]="apmisProviderLookupDisplayKey" [displayImage]="true"
                            [imgObj]="apmisProviderLookupImgKey" [multipleKeys]="true" [otherKeys]="apmisProviderLookupOtherKeys" (selectedItem)="apmisProviderLookupHandleSelectedItem($event)"></apmis-lookup>
                </div>

                    <div>
                        <mat-input-container>
                            <input matInput placeholder="Appointment Category" [matAutocomplete]="categoryAuto" [formControl]="category">
                        </mat-input-container>

                        <mat-autocomplete #categoryAuto="matAutocomplete" [displayWith]="categoryServiceDisplayFn">
                            <mat-option *ngFor="let category of categoryServices" [value]="category">
                                {{ category.name }}
                            </mat-option>
                        </mat-autocomplete>
                    </div>
        
                    <div>
                        <mat-input-container class="example-full-width">
                            <textarea matInput [formControl]="reason" placeholder="Reason"></textarea>
                        </mat-input-container>
                    </div>
                    
                    <div *ngIf="showTimeZone">
                        <mat-input-container>
                            <input matInput placeholder="Select Timezone" [matAutocomplete]="timezoneAuto" [formControl]="timezone">
                        </mat-input-container>
        
                        <mat-autocomplete #timezoneAuto="matAutocomplete" [displayWith]="timezoneDisplayFn">
                            <mat-option *ngFor="let timezone of timezones" [value]="timezone">
                                {{ timezone.name }}
                            </mat-option>
                        </mat-autocomplete>
                    </div> 
                    <div *ngIf="showImmunization">
                            <mat-input-container>
                                <input matInput placeholder="Immnunization Schedule" [matAutocomplete]="immunizationAuto" [formControl]="timezone">
                            </mat-input-container>  
                            <mat-autocomplete #immunizationAuto="matAutocomplete" [displayWith]="timezoneDisplayFn">
                                <mat-option  value="Birth">
                                    New Birth
                                </mat-option>
                                <mat-option  value="Pregnant">
                                    Pregnant
                                </mat-option>
                            </mat-autocomplete> 
                        </div>     
        </div>
    </div>

    <div class="btn-box">
        <button [disabled]="disableBtn || !dateCtrl.valid || !patient.valid || !type.valid || !category.valid || !clinic.valid" (click)="scheduleAppointment()" class="btn" [ngClass]="{'btn-blue':!disableBtn && dateCtrl.valid && patient.valid && type.valid && category.valid && clinic.valid, 'cta-1-disable':disableBtn || !dateCtrl.valid || !patient.valid || !type.valid || !category.valid || !clinic.valid}">
          <span *ngIf="updateAppointment">Update Appointment</span> 
          <span *ngIf="saveAppointment">Schedule Appointment</span>
          <span *ngIf="savingAppointment">Scheduling Appointment...<i class="fa fa-spinner fa-spin"></i></span>
        </button>
    </div>

</div>