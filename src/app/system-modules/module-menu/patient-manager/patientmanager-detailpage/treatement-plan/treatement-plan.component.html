<div class="pg-subtitle">PATIENT PAGE - TREATEMENT PLAN</div>


<div class="doc-mainWrap">
    <div class="doc-contentArea">
        <div class="tbl-listWrap">
            <div class="sect-title">Problem: {{treatmentSheetData?.problem?.problem}}</div>
            <div>
                <span>Note: {{treatmentSheetData?.problem?.note}}</span>
            </div>
        </div>
        <div class="tbl-listWrap">
            <div class="sect-title">Investigations</div>
            <button (click)="onAddNewInvestigation()">Add</button>
            <table cellpadding="0" cellspacing="0" border="0.5" [formGroup]="investigationTableForm">
                <tbody formArrayName="investigationTableArray">
                    <tr *ngIf="treatmentSheet?.investigations === undefined">
                        <td class="text-center" colspan="4"> No data available in table</td>
                    </tr>
                    <tr [formGroupName]="i" *ngFor="let investigation of investigationTableForm['controls'].investigationTableArray['controls'];let i = index">
                        <td> {{ investigation.value?.name }} </td>
                        <td>
                            <span>{{investigation.value?.status}}</span>
                        </td>
                        <td>
                            <div class="frm-item-wrap">
                                <mat-input-container>
                                    <input matInput placeholder="Valid comment for your action" formControlName="comment">
                                </mat-input-container>
                            </div>
                        </td>
                        <td>
                            <div class="tbl-actn-btn" (click)="onAdministerInvestigationItem(investigation.value)"><i
                                    class="fa fa-check" aria-hidden="true"></i>Administer</div>
                            <div class="tbl-actn-btn" (click)="onSuspendInvestigationItem(investigation.value,true)"><i
                                    class="fa fa-check" aria-hidden="true"></i>Suspend</div>
                            <div class="tbl-actn-btn" (click)="onSuspendInvestigationItem(investigation.value,false)"><i
                                    class="fa fa-check" aria-hidden="true"></i>Activate</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tbl-listWrap">
            <div class="sect-title">Procedure</div>
            <table cellpadding="0" cellspacing="0" border="0.5" [formGroup]="procedureTableForm">
                <tbody formArrayName="procedureTableArray">
                    <tr *ngIf="treatmentSheet?.procedures === undefined">
                        <td class="text-center" colspan="4"> No data available in table</td>
                    </tr>
                    <tr [formGroupName]="i" *ngFor="let procedure of procedureTableForm['controls'].procedureTableArray['controls'];let i = index">
                        <td> {{ procedure.value.name }} </td>
                        <td> {{ procedure.value.status }}</td>
                        <td>
                            <div class="frm-item-wrap">
                                <mat-input-container>
                                    <input matInput placeholder="Comment" formControlName="comment">
                                </mat-input-container>
                            </div>
                        </td>
                        <td>
                            <div (click)="onDoneProcedure(procedure.value)" class="tbl-actn-btn"><i class="fa fa-check"
                                    aria-hidden="true"></i>Done</div>
                            <div (click)="onSuspendProcedure(procedure.value,true)" class="tbl-actn-btn"><i class="fa fa-check"
                                    aria-hidden="true"></i>Suspend</div>
                            <div (click)="onSuspendProcedure(procedure.value,false)" class="tbl-actn-btn"><i class="fa fa-check"
                                    aria-hidden="true"></i>Activate</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tbl-listWrap">
            <div class="sect-title">Medication</div>
            <table cellpadding="0" cellspacing="0" border="0.5" [formGroup]="medicationTableForm">
                <tbody formArrayName="medicationTableArray">
                    <tr *ngIf="treatmentSheet?.medications === undefined">
                        <td class="text-center" colspan="5"> No data available in table</td>
                    </tr>
                    <tr [formGroupName]="i" *ngFor="let medication of medicationTableForm['controls'].medicationTableArray['controls'];let i = index">
                        <td>{{ medication?.value.name }}</td>
                        <td>{{ medication?.value.status }}</td>
                        <td>
                            <div class="frm-item-wrap">
                                <mat-input-container>
                                    <input matInput placeholder="Comment" formControlName="comment">
                                </mat-input-container>
                            </div>
                        </td>
                        <td class="action-placeholder" style="text-align:center;">
                            <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                            <div class="action-container shadow-RB">
                                <div *ngIf="medication.status!=='Suspended' && medication.status!=='Discontinued' && medication.status!=='Completed'"
                                    (click)="administer(medication.value)" class="action-item">
                                    <i class="fa fa-user-md" aria-hidden="true"></i>
                                    <span>Administer</span>
                                </div>

                                <div *ngIf="medication.status!=='Completed' && medication.status!=='Discontinued' && medication.status !=='Suspended'"
                                    (click)="suspendMedication(medication.value)" class="action-item">
                                    <i class="fa fa-pause text-yellow" aria-hidden="true"></i>
                                    <span>Suspend</span>
                                </div>
                                <div *ngIf="medication.status==='Suspended'" (click)="activateMedication(medication.value)"
                                    class="action-item">
                                    <i class="fa fa-play text-green" aria-hidden="true"></i>
                                    <span>Activate</span>
                                </div>

                                <div *ngIf="medication.status !=='Suspended' && medication.status !=='Discontinued' && medication.status!=='Completed'"
                                    (click)="discontinueMedication(medication.value)" class="action-item">
                                    <i class="fa fa-ban text-red" aria-hidden="true"></i>
                                    <span>Discontinue</span>
                                </div>

                                <div *ngIf="medication.status !=='Suspended' && medication.status !=='Discontinued' && medication.status!=='Completed'"
                                    (click)="completeMedication(medication.value)" class="action-item">
                                    <i class="fa fa-check text-green" aria-hidden="true"></i>
                                    <span>Completed</span>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tbl-listWrap">
            <div class="sect-title">Nursing Care</div>
            <table cellpadding="0" cellspacing="0" border="0.5" [formGroup]="nursingCareTableForm">
                <tbody formArrayName="nursingCareTableArray">
                    <tr *ngIf="treatmentSheet?.nursingCares === undefined">
                        <td class="text-center" colspan="4"> No data available in table</td>
                    </tr>
                    <tr [formGroupName]="i" *ngFor="let nursingCare of nursingCareTableForm['controls'].nursingCareTableArray['controls'];let i = index">
                        <td> {{ nursingCare.value.name }} </td>
                        <td> {{ nursingCare.value.status }}</td>
                        <td>
                            <div class="frm-item-wrap">
                                <mat-input-container>
                                    <input matInput placeholder="Comment" formControlName="comment">
                                </mat-input-container>
                            </div>
                        </td>
                        <td>
                            <div (click)="onDoneNursingCare(nursingCare.value)" class="tbl-actn-btn">
                                <i class="fa fa-check" aria-hidden="true"></i> Done <span *ngIf="isSaving" class="fa fa-spinner fa-spin"></span>
                            </div>
                            <div (click)="onSuspendNursingCare(nursingCare.value,true)" class="tbl-actn-btn">
                                <i class="fa fa-check" aria-hidden="true"></i> <span> Suspend </span>
                            </div>
                            <div (click)="onSuspendNursingCare(nursingCare.value,false)" class="tbl-actn-btn">
                                <i class="fa fa-check" aria-hidden="true"></i><span> Activate </span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tbl-listWrap">
            <div class="sect-title">Physician Order</div>
            <table cellpadding="0" cellspacing="0" border="0.5" [formGroup]="physicianOrderTableForm">
                <tbody formArrayName="physicianOrderTableArray">
                    <tr *ngIf="treatmentSheet?.physicianOrders === undefined">
                        <td class="text-center" colspan="4"> No data available in table</td>
                    </tr>
                    <tr [formGroupName]="i" *ngFor="let physicianOrder of physicianOrderTableForm['controls'].physicianOrderTableArray['controls'];let i = index">
                        <td> {{ physicianOrder.value.name }} </td>
                        <td> {{ physicianOrder.value.status }}</td>
                        <td>
                            <div class="frm-item-wrap">
                                <mat-input-container>
                                    <input matInput placeholder="Comment" formControlName="comment">
                                </mat-input-container>
                            </div>
                        </td>
                        <td>
                            <div (click)="onDonePhysicianOrderItem(physicianOrder.value)" class="tbl-actn-btn"><i class="fa fa-check" aria-hidden="true"></i>Done</div>
                            <div (click)="onSuspendPhysicianOrderItem(physicianOrder.value,true)" class="tbl-actn-btn"><i class="fa fa-check" aria-hidden="true"></i>Suspend</div>
                            <div (click)="onSuspendPhysicianOrderItem(physicianOrder.value,false)" class="tbl-actn-btn"><i class="fa fa-check" aria-hidden="true"></i>Activate</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>


        <div class="buttom-sect">
            <div class="frm-item-wrap">
                <textarea [formControl]="completionInfo" style="border:1px solid #777; padding:10px;box-sizing:border-box;background:#fff;" matInput
                    class="textarea" placeholder="Notes"></textarea>
            </div>
            <div (click)="onCompletedTreatmentSheet()" class="cta-1"><i class="fa fa-floppy-o" aria-hidden="true"></i>Save</div>
        </div>
        <div style="clear:right;"></div>
    </div>

</div>
<div *ngIf="isEditTreatmentSheet" class="modal-overlay">
    <app-order-set [selectedPatient]="patient" [treatmentSheetId]="treatmentSheetId" (closeModal)="close_onClick($event)"></app-order-set>
</div>