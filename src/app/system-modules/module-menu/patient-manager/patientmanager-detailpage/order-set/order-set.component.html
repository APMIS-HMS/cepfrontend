<div>
    <div (click)="close_onClickModal()" class="modal-close-ico">X</div>
    <div class="doc-mainWrap">
        <div class="pg-subtitle">
            ORDER SET
        </div>
        <div class="doc-contentArea">
            <div class="clinicalNoteWrap">
                <div class="frm-x2">
                    <div class="frm-item-wrap">
                        <apmis-lookup [formControl]="template" [url]="apmisLookupUrl" [query]="apmisLookupQuery" [isSocket]="false" [displayImage]="false" [multipleKeys]="false" [displayKey]="apmisLookupDisplayKey" placeholder="Select Template" (selectedItem)="apmisLookupHandleSelectedItem($event)"></apmis-lookup>
                    </div>

                    <div class="frm-item-wrap">
                        <apmis-lookup [formControl]="diagnosis" [url]="apmisLookupUrl" [query]="apmisDLookupQuery" [isSocket]="false" [displayImage]="false" [multipleKeys]="false" [displayKey]="apmisDLookupDisplayKey" placeholder="Select Diagnosis" (selectedItem)="apmisDLookupHandleSelectedItem($event)"></apmis-lookup>
                    </div>
                </div>

                <div class="med-sect">
                    <div class="itemSect-title">Medication</div>
                    <table class="item-ul">
                        <tbody>
                            <tr *ngIf="orderSet?.medications === undefined">
                                <td class="text-center" colspan="3"> No data available in table</td>
                            </tr>
                            <tr *ngFor="let orderSetMed of orderSet?.medications; let i=index;">
                                <td>{{ orderSetMed.genericName }}</td>
                                <td>{{ orderSetMed.frequency }} for {{ orderSetMed.duration }} {{ orderSetMed.durationUnit }}</td>
                                <td class="action-placeholder" style="text-align:center;">
                                  <button *ngIf="orderSetMed.isBilled ===undefined || !orderSetMed.isBilled" (click)="onClickBillPrescription(i, orderSetMed);" mat-raised-button class="text-white mat-xs-btn bg-primary ">
                                      <span *ngIf="orderSetMed.isBilled === undefined || !orderSetMed.isBilled">Bill</span>
                                      <span *ngIf="orderSetMed.isBilled">Billed</span>
                                    </button>
                                    <button *ngIf="orderSetMed.isBilled" (click)="onClickBillPrescription(i, orderSetMed);" mat-raised-button class="text-white mat-xs-btn bg-green ">
                                      <span *ngIf="orderSetMed.isBilled === undefined || !orderSetMed.isBilled">Bill</span>
                                      <span *ngIf="orderSetMed.isBilled">Billed</span>
                                    </button>&nbsp;&nbsp;
                                    <button mat-raised-button class="text-white bg-danger mat-xs-btn">
                                      <i class="fa fa-trash" aria-hidden="true"></i>
                                    </button>
                                </td>
                                <!-- <td *ngIf="showBill && i" style="background:#bebebe; position:relative;">
                                    <div class="billItemWrap shadow-tb">
                                        <app-order-bill-item (closeModal)="close_onClick($event)"></app-order-bill-item>
                                    </div>
                                </td> -->
                            </tr>
                        </tbody>
                    </table>
                    <div (click)="showOrderSetType('medication');" class="add-link"><i class="fa fa-plus" aria-hidden="true"></i> Add Medication</div>
                </div>
                <div class="med-sect">
                    <div class="itemSect-title">Investigation</div>
                    <table class="item-ul">
                        <tbody>
                            <tr *ngIf="orderSet?.investigations === undefined">
                                <td class="text-center" colspan="2"> No data available in table</td>
                            </tr>
                            <tr *ngFor="let orderSetInves of orderSet?.investigations">
                                <td>{{ orderSetInves.name }}</td>
                                <td class="action-placeholder" style="text-align:center;width:30px;">
                                    <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                                    <div class="action-container shadow-RB">
                                        <div (click)="popInvestigation_show()" class="action-item">
                                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                            <span>Edit Item</span>
                                        </div>

                                        <div class="action-item">
                                            <i class="fa fa-money" aria-hidden="true"></i>
                                            <span>Bill Item</span>
                                        </div>

                                        <div class="action-item">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                            <span>Remove Item</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div (click)="showOrderSetType('investigation');" class="add-link"><i class="fa fa-plus" aria-hidden="true"></i> Add Investigation</div>
                </div>

                <div class="med-sect">
                    <div class="itemSect-title">Procedure</div>
                    <table class="item-ul">
                        <tbody>
                            <tr *ngIf="orderSet?.procedures === undefined">
                                <td class="text-center" colspan="2"> No data available in table</td>
                            </tr>
                            <tr *ngFor="let orderSetPro of orderSet?.procedures">
                                <td> {{ orderSetPro.name }} </td>
                                <td class="action-placeholder" style="text-align:center;width:30px;">
                                    <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                                    <div class="action-container shadow-RB">
                                        <div class="action-item" (click)="popProcedure_show()">
                                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                            <span>Edit Item</span>
                                        </div>

                                        <div class="action-item">
                                            <i class="fa fa-money" aria-hidden="true"></i>
                                            <span>Bill Item</span>
                                        </div>

                                        <div class="action-item">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                            <span>Remove Item</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div (click)="showOrderSetType('procedure');" class="add-link"><i class="fa fa-plus" aria-hidden="true"></i> Add Procedure</div>
                </div>

                <div class="med-sect">
                    <div class="itemSect-title">Nursing Care</div>
                    <table class="item-ul">
                        <tbody>
                            <tr *ngIf="orderSet?.nursingCares === undefined">
                                <td class="text-center" colspan="2"> No data available in table</td>
                            </tr>
                            <tr *ngFor="let orderSetNur of orderSet?.nursingCares">
                                <td>{{ orderSetNur.name }}</td>
                                <td class="action-placeholder" style="text-align:center;width:30px;">
                                    <div>
                                        <i class="fa fa-close" aria-hidden="true"></i>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div (click)="showOrderSetType('nursing care');" class="add-link"><i class="fa fa-plus" aria-hidden="true"></i> Add Nursing Care</div>
                </div>

                <div class="med-sect">
                    <div class="itemSect-title">Physician Order</div>
                    <table class="item-ul">
                        <tbody>
                            <tr *ngIf="orderSet?.physicianOrders === undefined">
                                <td class="text-center" colspan="2"> No data available in table</td>
                            </tr>
                            <tr *ngFor="let orderSetPhy of orderSet?.physicianOrders">
                                <td>{{ orderSetPhy.name }}</td>
                                <td class="action-placeholder" style="text-align:center;width:30px;">
                                    <div>
                                        <i class="fa fa-close" aria-hidden="true"></i>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div (click)="showOrderSetType('physician order');" class="add-link"><i class="fa fa-plus" aria-hidden="true"></i> Add Physician Order</div>
                </div>
            </div>
            <div *ngIf="orderSet.medications!==undefined || orderSet.investigations!==undefined || orderSet.physicianOrders!==undefined || orderSet.nursingCares!==undefined" class="text-center btn-box">
                <button (click)="authorizerx()" mat-raised-button class="mat-lg-btn">Authorize</button>
            </div>
        </div>
    </div>
</div>
<div *ngIf="showBill">
    <app-order-bill-item [prescriptionData]="prescriptionData" (closeModal)="close_onClick($event)"></app-order-bill-item>
    <!-- <app-add-prescription [isDispensed]="isDispensed" [prescriptionItems]="prescriptionItems"></app-add-prescription> -->
</div>
<div *ngIf="popMed" class="modal-overlay">
    <app-edit-medication (closeModal)="close_onClick($event)" id="form-modal" class="form-modal center-center"></app-edit-medication>
</div>
<div *ngIf="popInvestigation" class="modal-overlay">
    <app-edit-investigation (closeModal)="close_onClick($event)" id="form-modal" class="form-modal center-center"></app-edit-investigation>
</div>
<div *ngIf="popNursingCare" class="modal-overlay">
    <app-edit-nursing-care (closeModal)="close_onClick($event)" id="form-modal" class="form-modal center-center"></app-edit-nursing-care>
</div>
<div *ngIf="popPhysicianOrder" class="modal-overlay">
    <app-edit-physician-order (closeModal)="close_onClick($event)" id="form-modal" class="form-modal center-center"></app-edit-physician-order>
</div>
<div *ngIf="popProcedure" class="modal-overlay">
    <app-edit-procedure (closeModal)="close_onClick($event)" id="form-modal" class="form-modal center-center"></app-edit-procedure>
</div>