<table cellpadding="0" cellspacing="0" border="0.5">
    <thead>
        <tr>
            <th>
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                <span style="padding-left: 3px;">Patient</span>
            </th>
            <th>
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                <span style="padding-left: 3px;">Age</span>
            </th>
            <th>
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                <span style="padding-left: 3px;">Sex</span>
            </th>
            <th>
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                <span style="padding-left: 3px;">Phone</span>
            </th>
            <th>
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                <span style="padding-left: 3px;">Email</span>
            </th>
            <th>
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                <span style="padding-left: 3px;">Address</span>
            </th>
            <th>
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                <span style="padding-left: 3px;">Born</span>
            </th>
            <th>
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
                <!--<i class="fa fa-sort-alpha-desc" aria-hidden="true"></i>-->
                <span style="padding-left: 3px;">Apmis ID</span>
            </th>
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
        <tr *ngFor="let patient of patients">
            <td class="pointer" (click)="navEpDetail(patient)">
                <div class="empWrap">
                    <div class="list-img">
                        <div *ngIf="patient?.personDetails?.profileImageObject == undefined"><img src="assets/images/users/default.png"></div>
                        <div *ngIf="patient?.personDetails?.profileImageObject != undefined"> <img class="shadow" [src]="facilityService.transform(patient?.personDetails?.profileImageObject?.thumbnail)"></div>
                    </div>
                    <div>{{patient.personDetails.lastName}} {{patient.personDetails.firstName}}</div>
                </div>
            </td>
            <td class="pointer" (click)="navEpDetail(patient)">{{patient.personDetails.age}}</td>
            <td class="pointer" (click)="navEpDetail(patient)">
                <span *ngIf="patient.personDetails.gender.name==='Male'">M</span>
                <span *ngIf="patient.personDetails.gender.name==='Female'">F</span>
                <span *ngIf="patient.personDetails.gender.name!='Female' && patient.personDetails.gender.name!='Male'">N</span>
            </td>
            <td class="pointer" (click)="navEpDetail(patient)">{{patient.personDetails.phoneNumber}}</td>
            <td class="pointer" (click)="navEpDetail(patient)">{{patient.personDetails.email}}</td>
            <td class="pointer" (click)="navEpDetail(patient)">{{patient.personDetails.homeAddress.street}} {{patient.personDetails.addressObj.city}} {{patient.personDetails.addressObj.state}} {{patient.personDetails.addressObj.country}}</td>
            <td class="pointer" (click)="navEpDetail(patient)">{{patient.personDetails.dateOfBirth | date}}</td>
            <td class="pointer" (click)="navEpDetail(patient)">{{patient.personDetails.apmisId}}</td>
            <td>
                <div (click)="slideEdit(patient)" class="tr-act-btn"><i class="fa fa-edit"></i>Edit</div>
            </td>
        </tr>
        <tr *ngIf="patients.length === 0 && !loading">
            <td class="table-content" colspan="9" style="text-align: center !important; padding: 10px !important;"> No data available in table</td>
        </tr>
        <tr *ngIf="patients.length === 0 && loading">
            <td class="table-content" colspan="9" style="text-align: center !important; padding: 10px !important;">
                <md-spinner class="small-spinner"></md-spinner>
            </td>
        </tr>

        <!--<div *ngIf="loadIndicatorVisible" class="div_loading">
            <md-spinner></md-spinner>
        </div>-->
    </tbody>
</table>

<div *ngIf="editPatient">
    <!--<div class="slidePage">
        <p>whoopy</p>
    </div>-->
    <div class="survery">
        <div class="cover-edit">
            <form class="form-signin">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6 col-md-offset-3">
                            <div class="panel panel-default">
                                <div class="panel-body">
                                    <a (click)="close_onClick()" aria-hidden="true" class="modal-close-ico">X</a>
                                    <legend class="modal_title">Edit Patient</legend>
                                    <form class="form form-signup" role="form">
                                        <md-tab-group>
                                            <md-tab label="Patient">
                                                <!--<input type="text" class="form-control" placeholder="Full Name" />-->
                                                <div class="col-sm-6 padding-0">
                                                    <md-input-container class="example-full-width">
                                                        <input mdInput type="text" placeholder="First Name" name="firstName" [(ngModel)]="selectedPatient.firstName">
                                                    </md-input-container>
                                                </div>
                                                <div class="col-sm-6 padding-0">
                                                    <md-input-container class="example-full-width">
                                                        <input mdInput placeholder="Last Name" name="lastName" [(ngModel)]="selectedPatient.lastName">
                                                    </md-input-container>
                                                </div>
                                                <div class="col-sm-6 padding-0">
                                                    <md-input-container class="example-full-width">
                                                        <input mdInput type="email" placeholder="Email" name="email" [(ngModel)]="selectedPatient.email">
                                                    </md-input-container>
                                                </div>
                                                <div class="col-sm-6 padding-0">
                                                    <md-input-container class="example-full-width">
                                                        <input mdInput type="number" placeholder="Mobile Number" name="phoneNumber" [(ngModel)]="selectedPatient.phoneNumber">
                                                    </md-input-container>
                                                </div>
                                                <div class="col-sm-6 padding-0">
                                                    <md-select placeholder="Gender" [(ngModel)]="selectedPatient.genderId" name="gender">
                                                        <md-option *ngFor="let gender of genders" [value]="gender._id">
                                                            {{gender.name}}
                                                        </md-option>
                                                    </md-select>
                                                </div>

                                                <!--<md-input-container class="example-full-width">
                                                    <input mdInput placeholder="Age">
                                                </md-input-container>-->
                                                <!--<md-input-container class="example-full-width">
                                                    <input mdInput placeholder="Address" name="fullAddress" [(ngModel)]="selectedPatient.fullAddress">
                                                </md-input-container>-->
                                                <div class="col-sm-6 padding-0">
                                                    <md-select placeholder="Country" [(ngModel)]="selectedValue" name="food">
                                                        <md-option *ngFor="let food of foods" [value]="food.value">
                                                            {{food.viewValue}}
                                                        </md-option>
                                                    </md-select>
                                                </div>
                                                <div class="col-sm-6 padding-0">
                                                    <md-select placeholder="State" [(ngModel)]="selectedValue" name="food">
                                                        <md-option *ngFor="let food of foods" [value]="food.value">
                                                            {{food.viewValue}}
                                                        </md-option>
                                                    </md-select>
                                                </div>
                                                <div class="col-sm-6 padding-0">
                                                    <md-select placeholder="City" [(ngModel)]="selectedValue" name="food">
                                                        <md-option *ngFor="let food of foods" [value]="food.value">
                                                            {{food.viewValue}}
                                                        </md-option>
                                                    </md-select>
                                                </div>
                                                <div class="col-sm-6 padding-0">
                                                    <md-select placeholder="LGA" [(ngModel)]="selectedValue" name="food">
                                                        <md-option *ngFor="let food of foods" [value]="food.value">
                                                            {{food.viewValue}}
                                                        </md-option>
                                                    </md-select>
                                                </div>
                                                <div class="col-sm-6 padding-0">
                                                    <md-input-container class="example-full-width">
                                                        <textarea mdInput placeholder="Street"></textarea>
                                                    </md-input-container>
                                                </div>



                                            </md-tab>
                                            <md-tab label="Next Of Kin">
                                                <div *ngFor="let next of selectedPatient.nextOfKin">
                                                    <md-input-container class="example-full-width">
                                                        <input mdInput type="text" [(ngModel)]="next.fullName" name="fullName" placeholder="Full Name">
                                                    </md-input-container>
                                                    <md-input-container class="example-full-width">
                                                        <input mdInput placeholder="Address" [(ngModel)]="next.address" name="address">
                                                    </md-input-container>
                                                    <md-input-container class="example-full-width">
                                                        <input mdInput type="number" placeholder="Mobile Number" [(ngModel)]="next.phoneNumber" name="phoneNumber">
                                                    </md-input-container>
                                                    <md-input-container class="example-full-width">
                                                        <input mdInput type="email" placeholder="Email" [(ngModel)]="next.email" name="email">
                                                    </md-input-container>
                                                    <md-select placeholder="Relationship" [(ngModel)]="next.relationship" name="relationship">
                                                        <md-option *ngFor="let relationship of relationships" [value]="relationship._id">
                                                            {{relationship.name}}
                                                        </md-option>
                                                    </md-select>
                                                </div>
                                                <div *ngIf="selectedPatient.nextOfKin.length == 0">
                                                    <form [formGroup]="nextOfKinForm">
                                                        <md-input-container class="example-full-width">
                                                            <input mdInput type="text" formControlName="fullName" placeholder="Full Name">
                                                        </md-input-container>
                                                        <md-input-container class="example-full-width">
                                                            <input mdInput placeholder="Address" formControlName="address">
                                                        </md-input-container>
                                                        <md-input-container class="example-full-width">
                                                            <input mdInput type="number" placeholder="Mobile Number" formControlName="phoneNumber">
                                                        </md-input-container>
                                                        <md-input-container class="example-full-width">
                                                            <input mdInput type="email" placeholder="Email" formControlName="email">
                                                        </md-input-container>
                                                        <md-select placeholder="Relationship" formControlName="relationship" name="relationship">
                                                            <md-option *ngFor="let relationship of relationships" [value]="relationship._id">
                                                                {{relationship.name}}
                                                            </md-option>
                                                        </md-select>
                                                    </form>

                                                </div>
                                            </md-tab>
                                        </md-tab-group>

                                    </form>
                                </div>
                                <div class="example-full-width" id="example-full-width">
                                    <button (click)="updatePatient()" class="apmis-blue" md-raised-button> Save </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>